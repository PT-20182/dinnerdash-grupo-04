<%= render  "layouts/banner_home" %>

<div class="bg-light border-bottom">
<div class="container d-flex pb-4">
    <div class="firstRow">
        <% @meal_categories.each do |category| %>
        <h2 style="<%= 'display:none' if query_meals(category.name).count < 1 %>" class ="mt-4 ml-1 text-dark"><%= category.name %></h3>
        <% query_meals(category.name).in_groups_of(4, false).each do |group| %> <!-- Seleciona apenas as refeicoes metallicas e mostra apenas 4/linha -->

            <div class="d-flex flex-column align-itens-center">
                <div class="d-flex justify-content-start w-100 mt-2">
                    <% group.each do |item| %>
                        <div class="card mr-3 mw-100" style="width: 16rem; min-width: 16rem;">

                                <div class="position-relative"> <!-- Necessario para o nome ficar no lugar -->
                                    <%= image_tag url_for(item.image), class: "card-image-top imgRefeicoes" %>
                                    <div class="position-absolute fixed-bottom nameRefeicoes">
                                        <%= item.name %>
                                    </div>
                                </div>

                                <div class="card-body">
                                    <div class="card-text text-secondary">
                                        <%= item.description %>
                                    </div>

                                    <div class="card-text text-success my-2">
                                        <span>R$ <%= number_with_precision(item.price, precision: 2,
                                                                            separator: ',', delimiter: '.') %>
                                                por porção</span>
                                    </div>

                                    <div class="card-text text-secondary">
                                        <span>Quantidade</span>
                                        <!-- quantidade select -->
                                    </div>

                                    <div class="d-flex justify-content-between">
                                        <%= button_to 'adicionar ao meu prato', :root, method: 'get',
                                            class: 'btn btn-success btn-small text-white px-4' %>
                                    </div>
                                </div>
                            </div>
                    <% end %>
                </div>
            </div>
        <% end %>
        <% end %>
    </div>
</div>
</div>

<div class="mb-3"></div>

<div class="container d-flex d-flex flex-column">
    <h2 class="h2_title mb-3 text-dark">Finalizou seu prato?</h3>
    <h4 class="h4_title text-secondary">Confira os itens pedidos antes de finalizar o pedido</h5>
</div>

<div class="container d-flex mb-5">
    <div class="firstRow">

        <!-- Items disponiveis no carrinho -->

    </div>
</div>

<div class="container"><hr class="border-bottom"></div>

<div class="container d-flex d-flex flex-column">
    <h2 class="mb-4 text-dark">Preço total do pedido: </h2>
    <% unless user_signed_in? %>   
        <p class="text-secondary">Para finalizar o seu pedido, entre com sua conta ou faça o seu cadastro.</p>
    <% end %>

    <div class="d-flex mb-5">
        <% if user_signed_in? %>
            <%= link_to 'finalizar e pagar', :root, # sera modificado ainda
                class: 'btn btn-success text-white mr-3' %>
        <% else %>
            <%= button_to 'entrar com minha conta', new_user_session_path,
                class: 'btn btn-success text-white mr-3' %>

            <%= link_to 'fazer o meu cadastro', new_user_registration_path,
                class: 'btn btn-outline-success px-4' %>
        <% end %>
    </div>
</div>

<%= render 'layouts/footer' %>
